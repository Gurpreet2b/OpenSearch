<div class="container m-t-30">
    <form>
        <div class="widget_header clearfix" [ngClass]="{ disabledClass: loading }">
            <div *ngIf="showControls" class="generator-content" id="reportStart" #reportStart>
                <div class="row pad-b-0">
                    <div class="col-md-12">
                        <div class="col-md-8">
                            <label>Report Type</label>
                            <hr>
                        </div>
                        <div class="col-md-4">
                            <label>Select User</label>
                            <hr>
                        </div>
                    </div>
                </div>
                <div class="pad-b-0 pad-t-0">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-8 p-l-indent">

                                <div class="rad-container">
                                    <label class="rad-label" [ngClass]="{ active: isActivityRadio === 'allActivity' }">
                                        <input type="radio" class="rad-input" name="all" id="allActivity"
                                            value="AA" checked [(ngModel)]="reportType"
                                            [ngModelOptions]="{ standalone: true }" 
                                            (change)="allActivityRadio('allActivity')" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">All Activity</div>
                                    </label>

                                    <label class="rad-label" [ngClass]="{
                                        active: isActivityRadio === 'internetActivity'}">
                                        <input type="radio" class="rad-input" name="all" id="internetActivity"
                                            value="Internet Usage" [(ngModel)]="reportType"
                                            [ngModelOptions]="{ standalone: true }"
                                            (change)="allActivityRadio('internetActivity')" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">Internet Activity</div>
                                    </label>

                                    <label class="rad-label"
                                        [ngClass]="{active: isActivityRadio === 'securityNetwork'}">
                                        <input type="radio" class="rad-input" name="all" id="securityNetwork"
                                            value="NAS" [(ngModel)]="reportType"
                                            [ngModelOptions]="{ standalone: true }"
                                            (change)="allActivityRadio('securityNetwork')" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">Internet Security and Network</div>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-4 p-l-indent">

                                <div class="rad-container">
                                    <label class="rad-label" [ngClass]="{ active: IsUserSelected == 'singleuser' }">
                                        <input type="radio" class="rad-input" name="Single" id="singleuser"
                                            value="singleuser" [(ngModel)]="userType"
                                            [ngModelOptions]="{ standalone: true }" checked
                                            (change)="setUserType('singleuser')" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">Single User</div>
                                    </label>

                                    <label class="rad-label" [ngClass]="{ active: IsUserSelected == 'allusers' }">
                                        <input type="radio" class="rad-input" name="All" id="allusers" value="allusers"
                                            [(ngModel)]="userType" [ngModelOptions]="{ standalone: true }"
                                            (change)="setUserType('allusers')" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">All Users</div>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- covers starting, ending date and user ip -->
                <div class="row p-top pad-b-0">
                    <div class="row pad-b-0">
                        <div class="col-md-12">

                            <div class="col-md-8">
                                <label>Report Schedule</label>
                                <hr>
                            </div>
                            <!-- <div class="col-md-4">
                                <label>End Date</label>
                                <hr>
                            </div> -->
                            <div class="col-md-4 userParent" *ngIf="IsHideAllUsers">
                                <div class="flexclass">
                                    <div class="userChild1">
                                        <label>User</label>
                                    </div>
                                    <div class="userChild2">
                                        <div class="userChild1">
                                            <div>IPV4</div>
                                            <label class="switch">
                                                <input type="checkbox" [checked]="useFirewallID"
                                                    (change)="userBasisChange($event)" />
                                                <span class="slider round"></span>
                                            </label>
                                            <div>FW ID</div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                            </div>
                        </div>
                    </div>
                    <div class="row pad-b-0">
                        <div class="col-md-12">

                            <!-- <hr class="hr_datetime"> -->
                            <div class="col-md-8 p-l-indent">
                                <!-- <label>Start Date</label> -->

                                <div class="rad-container">
                                    <label class="rad-label" [ngClass]="{ active: isSchduleTypeRadio === 'daily' }">
                                        <input type="radio" class="rad-input" name="all" id="daily"
                                            value="daily" checked (change)="ScheduleTypeRadio('daily')"
                                            [(ngModel)]="scheduleType" [ngModelOptions]="{ standalone: true }" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">Daily</div>
                                    </label>

                                    <label class="rad-label weekly-label"
                                        [ngClass]="{ active: isSchduleTypeRadio === 'weekly' }">
                                        <input type="radio" class="rad-input" name="all" id="weekly"
                                            value="weekly" checked (change)="ScheduleTypeRadio('weekly')"
                                            [(ngModel)]="scheduleType" [ngModelOptions]="{ standalone: true }" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">Weekly</div>
                                    </label>

                                    <!-- <label class="rad-label weekly-label"
                                        [ngClass]="{ active: isSchduleTypeRadio === 'Monthly' }">
                                        <input type="radio" class="rad-input" name="all" id="Monthly"
                                            value="monthly" checked (change)="ScheduleTypeRadio('Monthly')"
                                            [(ngModel)]="scheduleType" [ngModelOptions]="{ standalone: true }" />
                                        <div class="rad-design"></div>
                                        <div class="rad-text">Monthly</div>
                                    </label> -->
                                </div>

                            </div>
                            <div class="col-md-4 p-l-indent">
                            </div>

                            <div class="col-md-4 p-l-indent" *ngIf="IsHideAllUsers">
                                <!-- <label>Users</label> -->
                                <div class="">
                                    <input type="text" class="form-control box_security" [(ngModel)]="reportUser"
                                        [ngModelOptions]="{ standalone: true }" name="reportUser" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div *ngIf="additionalFiltersEnabled" class="row pad-b-0">
                    <div class="row pad-b-0">
                        <div class="col-md-12">
                            <div class="col-md-6">
                                <label>Email Recievers</label>
                                <hr>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="w-input-0" *ngFor="let obj of AddEmailListArray; let i = index">
                            <div class="col-md-12">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <div class="form-control box_security">
                                            {{obj}}
                                        </div>
                                        <!-- <input type="text" class="form-control box_security" placeholder="Please Enter Email"
                                        [(ngModel)]="obj" [ngModelOptions]="{ standalone: true }" name="reportUser" 
                                        disabled /> -->
                                    
                                        <!-- <input type="text" formControlName="email" class="form-control box_security" 
                                        placeholder="Please Enter Email"
                                        [ngClass]="{ 'is-invalid': submitted && f.email.errors }" />
                                        <div *ngIf="submitted && f.email.errors && i === AddEmailListArray.length - 1" class="invalid-feedback">
                                            <div *ngIf="f.email.errors.required">Email is required</div>
                                            <div *ngIf="f.email.errors.email">Email must be a valid email address</div>
                                        </div> -->
                                    </div>

                                </div>
                                
                                <div *ngIf="i != 0">
                                    <button class="crossButton" (click)="removeAdditionalFilter(i)" [disabled]="i == 0">
                                        x
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div>
                            <button class="button addNewText" title="Add Email"
                            data-toggle="modal" data-target="#scheduleAddMailModal">+</button>
                        </div>
                    </div>
                </div>



                <div class="row pb-3">
                    <div class="col-md-12">
                        <!-- <div class="flex"> -->
                        <div class="col-md-9 text-right">
                            <button type="button" class="btn theme-btn" data-toggle="modal" data-target="#scheduleMail">
                                Email
                            </button>
                        </div>
                        <div class="col-md-3 text-right">
                            <div *ngIf="loading" id="loading"></div>
                            <button type="button" class="btn theme-btn" (click)="generateOverallReport()">
                                Schedule Report
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>


<div class="modal in" id="scheduleAddMailModal">
    <div class="modal-dialog">
        <div class="modal-content popup_success">
            <div class="modal-body">
                <h4>Add Email</h4>
                <hr>
                <div class="row">
                    <div class="col-md-12">
                        <form [formGroup]="AddEmailForm" (ngSubmit)="addEmailSubmit()">
                            <div class="form-group">
                                <label> Email </label>
                                <input type="text" formControlName="email" class="form-control box_security" 
                                placeholder="Please Enter Email"
                                [ngClass]="{ 'is-invalid': submitted && f.email.errors }" />
                                <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
                                    <div *ngIf="f.email.errors.required">Email is required</div>
                                    <div *ngIf="f.email.errors.email">Email must be a valid email address</div>
                                </div>
                            </div>
                            <div class="col-md-12 p-0">
                                <button class="popup-thm-btn" data-dismiss="modal">Close</button>
                                <button class="popup-thm-btn ml-2" type="submit">Save</button>
                            </div>
                        </form>
                    </div>
                </div>

                
            </div>
        </div>
    </div>
</div>

<div class="modal in" id="scheduleMail">
    <div class="modal-dialog">
        <div class="modal-content popup_success">
            <div class="modal-body">
                <h4>Email Settings</h4>
                <hr>
                <div class="row">
                    <div class="col-md-12">
                        <b>Mail Settings</b> <br>
                        <label>Sophos Reporter likes to email you from time to time. How should it fo this? (You can
                            also see this later in Settings / Email).</label>
                        <!-- <hr> -->
                    </div>
                </div>

                <!-- <div class="row"> -->
                <div class="col-md-12">
                    <div class="col-lg-8">
                        <label> Email Server </label>
                        <input type="text" class="form-control box_security" /> <br>
                        <hr>
                    </div>
                    <div class="col-lg-4">
                        <label> Port </label>
                        <input type="text" class="form-control box_security" /> <br>
                        <hr>
                    </div>
                </div>

                <!-- </div> -->
                <div class="row">
                    <div class="col-lg-12">
                        <label> Send <b>from</b> this address </label>
                        <input type="text" class="form-control box_security" /> <br>
                        <label> Send <b>to</b> this address </label>
                        <input type="text" class="form-control box_security" /> <br>
                        <label>*daily reports,errors,subscription expiry etc.</label>
                        <hr>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <label> Username (optional) </label>
                        <input type="text" class="form-control box_security" /> <br>
                        <label> Password (optional) </label>
                        <input type="text" class="form-control box_security" /> <br>
                        <label>Use a secure connection (SSL/TLS)?</label> <br>
                        <input type="checkbox" checked>
                    </div>
                </div>

                <div class="col-md-12 text-right">
                    <button class="popup-thm-btn" data-dismiss="modal">Close</button>
                    <button class="popup-thm-btn ml-2">Save</button>
                </div>
            </div>
        </div>
    </div>
</div>
